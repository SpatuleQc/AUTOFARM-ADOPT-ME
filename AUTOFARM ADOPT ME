local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

-- GUI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "XenoSafeAdoptMeFarm"
gui.Parent = game.CoreGui

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 280, 0, 180)
frame.Position = UDim2.new(0.5, -140, 0.5, -90)
frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
frame.Active = true
frame.Draggable = true
frame.Parent = gui

local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 30)
title.Text = "Xeno Adopt Me AutoFarm"
title.TextColor3 = Color3.new(1,1,1)
title.BackgroundTransparency = 1

local startBtn = Instance.new("TextButton", frame)
startBtn.Size = UDim2.new(1, -20, 0, 40)
startBtn.Position = UDim2.new(0, 10, 0, 40)
startBtn.Text = "Start AutoFarm"
startBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
startBtn.TextColor3 = Color3.new(1,1,1)

local stopBtn = Instance.new("TextButton", frame)
stopBtn.Size = UDim2.new(1, -20, 0, 40)
stopBtn.Position = UDim2.new(0, 10, 0, 90)
stopBtn.Text = "Stop AutoFarm"
stopBtn.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
stopBtn.TextColor3 = Color3.new(1,1,1)

local status = Instance.new("TextLabel", frame)
status.Size = UDim2.new(1, 0, 0, 20)
status.Position = UDim2.new(0, 0, 1, -20)
status.Text = "Status: Idle"
status.TextColor3 = Color3.fromRGB(255, 255, 0)
status.BackgroundTransparency = 1

local running = false

local locations = {
    {name = "School", pos = Vector3.new(-28, 21, -680)},
    {name = "Playground", pos = Vector3.new(336, 22, -597)},
    {name = "Hospital", pos = Vector3.new(214, 22, -764)},
    {name = "Campsite", pos = Vector3.new(-1422, 21, 469)},
    {name = "Hot Springs", pos = Vector3.new(-1083, 21, -143)},
    {name = "Pet Shop", pos = Vector3.new(33, 21, -713)},
    {name = "Nursery", pos = Vector3.new(33, 21, -904)},
    {name = "Pizza Shop", pos = Vector3.new(378, 22, -820)},
    {name = "Salon", pos = Vector3.new(235, 22, -635)},
}

local function walkTo(position)
    local character = player.Character
    if not character or not character:FindFirstChild("HumanoidRootPart") or not character:FindFirstChild("Humanoid") then
        return false
    end
    local humanoid = character.Humanoid
    local hrp = character.HumanoidRootPart
    local reached = false

    humanoid:MoveTo(position)
    status.Text = "Status: Walking to " .. tostring(position)

    local connection
    connection = humanoid.MoveToFinished:Connect(function(reachedSuccessfully)
        reached = true
        connection:Disconnect()
    end)

    local timeout = tick() + 20
    while not reached and tick() < timeout do
        wait(0.3)
    end
    humanoid:MoveTo(hrp.Position) -- Stop moving
    return reached
end

local function antiAfk()
    game:GetService("Players").LocalPlayer.Idled:Connect(function()
        local vu = game:GetService("VirtualUser")
        vu:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
        wait(1)
        vu:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
    end)
end

local function runAutoFarm()
    antiAfk()
    while running do
        for _, loc in ipairs(locations) do
            if not running then break end
            status.Text = "Status: Moving to " .. loc.name
            local success = walkTo(loc.pos)
            if not success then
                status.Text = "Status: Failed to reach " .. loc.name
                wait(3)
            else
                status.Text = "Status: At " .. loc.name
                -- Just wait here to simulate interacting with pets/tasks
                wait(math.random(8, 15))
                -- Random breaks to look natural
                if math.random(1,10) == 5 then
                    status.Text = "Status: Taking a short break..."
                    wait(math.random(20, 40))
                end
            end
        end
    end
    status.Text = "Status: Stopped"
end

startBtn.MouseButton1Click:Connect(function()
    if not running then
        running = true
        spawn(runAutoFarm)
    end
end)

stopBtn.MouseButton1Click:Connect(function()
    running = false
end)

